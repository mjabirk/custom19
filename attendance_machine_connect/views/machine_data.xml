<odoo>
	<data>
	<menuitem id="menu_hr_attendance_machine_root" name="Attendance Machine" parent="hr_attendance.menu_hr_attendance_root" sequence="100" />

		<!-- Attendance Machine Configuration -->
		<record model="ir.ui.view" id="view_attendance_machines_form">
			<field name="name">attendance.machines.form</field>
			<field name="model">attendance.machines</field>
			<field name="arch" type="xml">
				<form string="Attendance Machines">
					<group>
						<group>
							<field name="name" />
							<field name="ip" />
							<field name="port" />
							<field name="model" />
							<field name="processing" />
							<field name="last_rec_date" />
							<field name="info"  nolabel="1"/>
						</group>
					</group>
				</form>
			</field>
		</record>
		
		<record model="ir.ui.view" id="view_attendance_machines_tree">
			<field name="name">attendance.machines.tree</field>
			<field name="model">attendance.machines</field>
			<field name="arch" type="xml">
				<list string="Attendance Machines">
						<field name="name" />
						<field name="ip" />
						<field name="port" />
						<field name="model" />
						<field name="processing" />
						<field name="last_rec_date" />
				</list>
			</field>
		</record>
		
		<record id="action_attendance_machines" model="ir.actions.act_window">
			<field name="name">Attendance Machines</field>
			<field name="res_model">attendance.machines</field>
			<field name="view_mode">list,form</field>
			<field name="help">Attendance Machines</field>
		</record>

		<menuitem parent="menu_hr_attendance_machine_root"  id="menu_attendance_machines" name="Attendance Machines" action="action_attendance_machines"  sequence="100" />

		<!-- Attendance Machine Data -->
		<record model="ir.ui.view" id="view_attendance_machine_data_form">
			<field name="name">attendance.machine.data.form</field>
			<field name="model">attendance.machine.data</field>
			<field name="arch" type="xml">
				<form string="Attendance Machine Data">
					<group>
						<group>
							<field name="name" />
							<field name="ip_address" />
							<field name="type" />
							<field name="date" />
							<field name="uid" />
							<field name="barcode" />
							<field name="status" invisible="status == False"/>
							<field name="processed" />
							<button string="Create Timesheet" type="object" name="create_timesheet" class="oe_highlight" />
							<button string="Create Leaves" type="object" name="create_timeoff" class="oe_highlight" />
						</group>
						<group/>
					</group>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="view_attendance_machine_data_tree">
			<field name="name">attendance.machine.data.tree</field>
			<field name="model">attendance.machine.data</field>
			<field name="arch" type="xml">
				<list string="Attendance Machine Data">
					<field name="name" />
					<field name="ip_address" />
					<field name="type" />
					<field name="date" />
					<field name="uid" />
					<field name="barcode" />
					<field name="status" invisible="status == False"/>
					<field name="processed" />
				</list>
			</field>
		</record>

		<record id="action_attendance_machine_data" model="ir.actions.act_window">
			<field name="name">Attendance Machine Data</field>
			<field name="res_model">attendance.machine.data</field>
			<field name="view_mode">list,form</field>
			<field name="help">Attendance Machine Data</field>
		</record>

		<menuitem parent="menu_hr_attendance_machine_root" sequence="90" id="menu_attendance_machine_data" name="Attendance Machine Data" action="action_attendance_machine_data" />

	</data>

    <data noupdate="1">
        <record forcecreate="True" id="ir_cron_scheduler_create_timesheet" model="ir.cron">
            <field name="name">Create Timesheet</field>
            <field name="model_id" ref="attendance_machine_connect.model_attendance_machine_data"/>
            <field name="state">code</field>
            <field name="code">model.create_timesheet()</field>
            <field eval="True" name="active" />
            <field name="user_id" ref="base.user_root" />
            <field name="interval_number">10</field>
            <field name="interval_type">minutes</field>
        </record>


        <record forcecreate="True" id="ir_cron_scheduler_timeoff_from_attendance" model="ir.cron">
            <field name="name">Create Timeoff Based on Attendance</field>
            <field name="model_id" ref="attendance_machine_connect.model_attendance_machine_data"/>
            <field name="state">code</field>
            <field name="code">model.create_timeoff()</field>
            <field eval="True" name="active" />
            <field name="user_id" ref="base.user_root" />
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
        </record>
    </data>
</odoo>

